#!/bin/sh

# exit the installer if any command fails
set -e


# the uninstaller should be run as root
if [ "$(whoami)" != "root" ]; then
  echo "This uninstaller should be run as root"
  exit 1
fi


echo "Uninstalling nextPYP ..."


# delete the executables from /usr/bin
rm "/usr/bin/nextpyp-start"
rm "/usr/bin/nextpyp-stop"
rm "/usr/bin/nextpyp-hostprocessor"
rm "/usr/bin/nextpyp-uninstall"


# uninstall systemd integrations
appDaemon="nextPYP"
systemctl disable $appDaemon
systemctl stop $appDaemon
rm "/lib/systemd/system/$appDaemon.service"

# poke systemd to recognize the removal of the daemon
systemctl daemon-reload


echo "Finished uninstalling nextPYP"
echo "Data stored in the local and shared folders were not deleted."
echo "If you wish to delete all of the data as well, then delete those folders too."
